<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Photo Frame Tool</title>
    <link rel="stylesheet" href="styles/app.css">
    <meta name="description" content="Add beautiful frames to your photos - drag, zoom, rotate and share">
    
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8IS0tIOiDjOaZryAtLT4KICA8cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIzIiBmaWxsPSIjZjhmOWZhIi8+CiAgCiAgPCEtLSDnm7jmhoYgKOmHkeiJsuaBuOWxpCkgLS0+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImdvbGRHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkE1MDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY4QzAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICAKICA8IS0tIOWkluahhuW7tiAtLT4KICA8cmVjdCB4PSIyIiB5PSIyIiB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHJ4PSIyIiBmaWxsPSJub25lIiBzdHJva2U9InVybCgjZ29sZEdyYWRpZW50KSIgc3Ryb2tlLXdpZHRoPSI0Ii8+CiAgCiAgPCEtLSDlhaXpg6jnhafniYflnY/ln58gLS0+CiAgPHJlY3QgeD0iNiIgeT0iNiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iMSIgZmlsbD0id2hpdGUiLz4KICAKICA8IS0tIOebuOmKn+Wcluaomeq8nCAtLT4KICA8cmVjdCB4PSIxMiIgeT0iMTQiIHdpZHRoPSI4IiBoZWlnaHQ9IjUiIHJ4PSIxIiBmaWxsPSIjMzQ5OGRiIi8+CiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNi41IiByPSIyIiBmaWxsPSIjMzQ5OGRiIi8+CiAgCiAgPCEtLSDoo4Xpo77npbkgLS0+CiAgPGNpcmNsZSBjeD0iOCIgY3k9IjgiIHI9IjEuNSIgZmlsbD0idXJsKCNnb2xkR3JhZGllbnQpIi8+CiAgPGNpcmNsZSBjeD0iMjQiIGN5PSI4IiByPSIxLjUiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIvPgogIDxjaXJjbGUgY3g9IjgiIGN5PSIyNCIgcj0iMS41IiBmaWxsPSJ1cmwoI2dvbGRHcmFkaWVudCkiLz4KICA8Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxLjUiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIvPgo8L3N2Zz4K">
    <link rel="icon" type="image/png" sizes="32x32" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8IS0tIOiDjOaZryAtLT4KICA8cmVjdCB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSIzIiBmaWxsPSIjZjhmOWZhIi8+CiAgCiAgPCEtLSDnm7jmhoYgKOmHkeiJsuaBuOWxpCkgLS0+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9ImdvbGRHcmFkaWVudCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSI1MCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkE1MDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY4QzAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICAKICA8IS0tIOWkluahhuW9tiAtLT4KICA8cmVjdCB4PSIyIiB5PSIyIiB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHJ4PSIyIiBmaWxsPSJub25lIiBzdHJva2U9InVybCgjZ29sZEdyYWRpZW50KSIgc3Ryb2tlLXdpZHRoPSI0Ii8+CiAgCiAgPCEtLSDlhaXpg6jnhafniYflnY/ln58gLS0+CiAgPHJlY3QgeD0iNiIgeT0iNiIgd2lkdGg9IjIwIiBoZWlnaHQ9IjIwIiByeD0iMSIgZmlsbD0id2hpdGUiLz4KICAKICA8IS0tIOebuOmKn+Wcluaomeq8nCAtLT4KICA8cmVjdCB4PSIxMiIgeT0iMTQiIHdpZHRoPSI4IiBoZWlnaHQ9IjUiIHJ4PSIxIiBmaWxsPSIjMzQ5OGRiIi8+CiAgPGNpcmNsZSBjeD0iMTYiIGN5PSIxNi41IiByPSIyIiBmaWxsPSIjMzQ5OGRiIi8+CiAgCiAgPCEtLSDoo4Xpo77npbkgLS0+CiAgPGNpcmNsZSBjeD0iOCIgY3k9IjgiIHI9IjEuNSIgZmlsbD0idXJsKCNnb2xkR3JhZGllbnQpIi8+CiAgPGNpcmNsZSBjeD0iMjQiIGN5PSI4IiByPSIxLjUiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIvPgogIDxjaXJjbGUgY3g9IjgiIGN5PSIyNCIgcj0iMS41IiBmaWxsPSJ1cmwoI2dvbGRHcmFkaWVudCkiLz4KICA8Y2lyY2xlIGN4PSIyNCIgY3k9IjI0IiByPSIxLjUiIGZpbGw9InVybCgjZ29sZEdyYWRpZW50KSIvPgo8L3N2Zz4K">
    <link rel="icon" type="image/png" sizes="16x16" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8ZGVmcz4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0iZ3JhZCIgeDE9IjAlIiB5MT0iMCUiIHgyPSIxMDAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNGRkQ3MDAiLz4KICAgICAgPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdHlsZT0ic3RvcC1jb2xvcjojRkY4QzAwIi8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8cmVjdCB4PSIxIiB5PSIxIiB3aWR0aD0iMTQiIGhlaWdodD0iMTQiIHJ4PSIxIiBmaWxsPSJub25lIiBzdHJva2U9InVybCgjZ3JhZCkiIHN0cm9rZS13aWR0aD0iMiIvPgogIDxyZWN0IHg9IjMiIHk9IjMiIHdpZHRoPSIxMCIgaGVpZ2h0PSIxMCIgZmlsbD0id2hpdGUiLz4KICA8Y2lyY2xlIGN4PSI4IiBjeT0iOCIgcj0iMiIgZmlsbD0iIzM0OThkYiIvPgo8L3N2Zz4K">
</head>
<body>
    <!-- Include Icon Sprite Inline -->
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
      <!-- Upload Icon -->
      <symbol id="icon-upload" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="7,10 12,5 17,10"/>
        <line x1="12" y1="5" x2="12" y2="15"/>
      </symbol>
      <!-- Download Icon -->
      <symbol id="icon-download" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-15"/>
        <polyline points="7,10 12,15 17,10"/>
        <line x1="12" y1="15" x2="12" y2="3"/>
      </symbol>
      <!-- Share Icon -->
      <symbol id="icon-share" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/>
        <polyline points="16,6 12,2 8,6"/>
        <line x1="12" y1="2" x2="12" y2="15"/>
      </symbol>
      <!-- Rotate Icon -->
      <symbol id="icon-rotate" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="23,4 23,10 17,10"/>
        <polyline points="1,20 1,14 7,14"/>
        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
      </symbol>
      <!-- Reset Icon -->
      <symbol id="icon-reset" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="3,6 5,6 21,6"/>
        <path d="M19,6v14a2,2 0 0,1 -2,2H7a2,2 0 0,1 -2,-2V6m3,0V4a2,2 0 0,1 2,-2h4a2,2 0 0,1 2,2v2"/>
        <line x1="10" y1="11" x2="10" y2="17"/>
        <line x1="14" y1="11" x2="14" y2="17"/>
      </symbol>
      <!-- Camera Icon -->
      <symbol id="icon-camera" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/>
        <circle cx="12" cy="13" r="4"/>
      </symbol>
      <!-- Square Format Icon -->
      <symbol id="icon-square" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
      </symbol>
      <!-- Portrait Format Icon -->
      <symbol id="icon-portrait" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="5" y="2" width="14" height="20" rx="2" ry="2"/>
      </symbol>
      <!-- Story Format Icon -->
      <symbol id="icon-story" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="6" y="1" width="12" height="22" rx="2" ry="2"/>
      </symbol>
      <!-- Loading Spinner Icon -->
      <symbol id="icon-spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="12" y1="2" x2="12" y2="6"/>
        <line x1="12" y1="18" x2="12" y2="22"/>
        <line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/>
        <line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/>
        <line x1="2" y1="12" x2="6" y2="12"/>
        <line x1="18" y1="12" x2="22" y2="12"/>
        <line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/>
        <line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/>
      </symbol>
    </svg>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1 class="title">Photo Frame</h1>
            <div class="status-message" id="statusMessage" aria-live="polite"></div>
        </header>

        <!-- Main Canvas Area -->
        <main class="canvas-container">
            <div class="canvas-card">
                <canvas 
                    id="mainCanvas" 
                    width="1080" 
                    height="1080"
                    aria-label="Photo editing canvas"
                    role="img"
                ></canvas>
                <div class="canvas-overlay" id="canvasOverlay">
                    <div class="placeholder-text" id="placeholderText">
                        <div class="placeholder-icon">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <use href="#icon-camera"></use>
                            </svg>
                        </div>
                        <p>點擊「Upload」或此區域開始上傳照片</p>
                    </div>
                    
                    <!-- Gesture Hints (shown after image upload) -->
                    <div class="gesture-hint" id="gestureHint" style="display: none;">
                        <span id="gestureText">拖拽移動照片</span>
                    </div>
                    
                    <!-- Gesture Help Text -->
                    <div class="gesture-help" id="gestureHelp" style="display: none;">
                        拖拽移動 • 雙指縮放 • 雙指旋轉 • 雙擊置中
                    </div>
                </div>
            </div>
        </main>

        <!-- Format Selector -->
        <div class="format-selector" id="formatSelector">
            <label class="format-label">尺寸格式：</label>
            <div class="format-buttons" role="radiogroup" aria-label="Output format selection">
                <button 
                    class="format-btn active" 
                    data-format="square"
                    role="radio" 
                    aria-checked="true"
                    aria-label="正方形格式，適合 Instagram 貼文"
                >
                    <span class="format-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <use href="#icon-square"></use>
                        </svg>
                    </span>
                    <div class="format-content">
                        <span class="format-text">正方形</span>
                        <span class="format-desc">1080×1080</span>
                    </div>
                </button>
                <button 
                    class="format-btn" 
                    data-format="portrait"
                    role="radio" 
                    aria-checked="false"
                    aria-label="直式格式，適合 Instagram 直式貼文"
                >
                    <span class="format-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <use href="#icon-portrait"></use>
                        </svg>
                    </span>
                    <div class="format-content">
                        <span class="format-text">直式</span>
                        <span class="format-desc">1080×1350</span>
                    </div>
                </button>
                <button 
                    class="format-btn" 
                    data-format="story"
                    role="radio" 
                    aria-checked="false"
                    aria-label="限時動態格式，適合 Instagram 限時動態和 TikTok"
                >
                    <span class="format-icon">
                        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <use href="#icon-story"></use>
                        </svg>
                    </span>
                    <div class="format-content">
                        <span class="format-text">限時動態</span>
                        <span class="format-desc">1080×1920</span>
                    </div>
                </button>
            </div>
        </div>

        <!-- Precision Controls Panel -->
        <div class="precision-panel" id="precisionPanel">
            <button class="precision-toggle" id="precisionToggle" aria-label="展開精確調整控制項">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M9 12l2 2 4-4"/>
                    <circle cx="12" cy="12" r="10"/>
                </svg>
                <span>精確調整</span>
            </button>
            
            <div class="precision-controls" id="precisionControls">
                <div class="control-group">
                    <label class="control-label">縮放</label>
                    <div class="slider-container">
                        <input type="range" class="control-slider" id="scaleSlider" 
                               min="10" max="500" step="1" value="100">
                        <span class="slider-value" id="scaleValue">100%</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">旋轉</label>
                    <div class="slider-container">
                        <input type="range" class="control-slider" id="rotationSlider" 
                               min="0" max="360" step="1" value="0">
                        <span class="slider-value" id="rotationValue">0°</span>
                    </div>
                </div>
                
                <div class="control-group">
                    <label class="control-label">位置微調</label>
                    <div class="position-controls">
                        <button class="position-btn" id="moveUp" aria-label="向上微調">↑</button>
                        <div class="position-row">
                            <button class="position-btn" id="moveLeft" aria-label="向左微調">←</button>
                            <button class="position-btn" id="centerPosition" aria-label="居中">⊙</button>
                            <button class="position-btn" id="moveRight" aria-label="向右微調">→</button>
                        </div>
                        <button class="position-btn" id="moveDown" aria-label="向下微調">↓</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Controls Toolbar -->
        <nav class="toolbar" role="toolbar" aria-label="Photo editing controls">
            <input 
                type="file" 
                id="fileInput" 
                accept="image/*" 
                capture="environment"
                style="display: none;"
                aria-label="Select photo file or take photo"
            >
            
            <button 
                class="toolbar-btn primary" 
                id="uploadBtn"
                aria-label="Upload photo from device or take photo"
            >
                <span class="btn-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <use href="#icon-upload"></use>
                    </svg>
                </span>
                <span class="btn-text">上傳/拍照</span>
            </button>

            <button 
                class="toolbar-btn" 
                id="resetBtn"
                aria-label="重置照片位置和縮放，讓照片重新適合相框"
                disabled
            >
                <span class="btn-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <use href="#icon-reset"></use>
                    </svg>
                </span>
                <span class="btn-text">重置位置</span>
            </button>

            <button 
                class="toolbar-btn" 
                id="rotateBtn"
                aria-label="順時針旋轉照片 90 度"
                disabled
            >
                <span class="btn-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <use href="#icon-rotate"></use>
                    </svg>
                </span>
                <span class="btn-text">旋轉</span>
            </button>

            <button 
                class="toolbar-btn" 
                id="downloadBtn"
                aria-label="Download framed photo"
                disabled
            >
                <span class="btn-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <use href="#icon-download"></use>
                    </svg>
                </span>
                <span class="btn-text">Download</span>
            </button>

            <button 
                class="toolbar-btn" 
                id="shareBtn"
                aria-label="分享相框照片"
                disabled
            >
                <span class="btn-icon">
                    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <use href="#icon-share"></use>
                    </svg>
                </span>
                <span class="btn-text">分享</span>
            </button>
        </nav>

        <!-- Loading Indicator -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="loading-spinner">
                <svg class="icon spinner" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <use href="#icon-spinner"></use>
                </svg>
            </div>
            <p>Processing image...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="src/main.js"></script>

    <!-- 
    README - Local Development & GitHub Pages Deployment
    
    LOCAL DEVELOPMENT:
    1. Clone this repository
    2. Serve files with a local HTTP server (required for modules):
       - Python: python -m http.server 8000
       - Node.js: npx serve . -p 8000
       - VS Code: Use Live Server extension
    3. Open http://localhost:8000
    
    GITHUB PAGES DEPLOYMENT:
    1. Push code to your GitHub repository
    2. Go to Settings > Pages
    3. Select "Deploy from a branch"
    4. Choose "main" branch and "/ (root)" folder
    5. Save and wait for deployment
    6. Access via https://yourusername.github.io/your-repo-name
    
    FEATURES:
    - Mobile-first responsive design
    - Touch gestures: drag, pinch-zoom, rotate
    - EXIF orientation correction
    - High-quality 1080x1080 output
    - Native sharing on supported devices
    
    BROWSER COMPATIBILITY:
    - iOS Safari 15+
    - Android Chrome 100+
    - Desktop Chrome/Edge/Safari
    - Requires HTTPS for sharing features
    -->
</body>
</html>